<!DOCTYPE html>
<html>
	<head>
		<title>Pulsi</title>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.5/jquery-ui.min.js"></script>
		<script type="text/javascript" src="javascripts/sammy-0.6.1.min.js"></script>
		<script type="text/javascript" src="javascripts/companies.js"></script>
		<script type="text/javascript">
			var baseUrl = 'http://api.crunchbase.com/';
			var companyName;
		
			$(document).ready(function(){
				var sammy = $.sammy(function() {
					this.get('#/:name', function() {
						companyName = this.params['name'];
						showCompanyDetails();
					});
				});
				sammy.run();
			});
			
			function showCompanyDetails(){
				$('#info').html('');
				companies.crunchbaseInfo(companyName, function(companyInfo) {
					$('<h1 id="company_name">'+companyInfo.name+'</h1>').appendTo('#info');
					$('<a href="'+companyInfo.homepage_url+'" id="company_url" target="_blank"><img src="'+baseUrl+companyInfo.image.available_sizes[0][1]+'" id="company_logo" alt="logo" /></a>').appendTo('#info');
					$('<p><strong>Value:</strong> <span id="company_value"></span></p>').appendTo('#info');
					if(companyInfo.twitter_username){
						$('<p><strong>Twitter:</strong> <a href="http://twitter.com/#!/'+companyInfo.twitter_username+'" id="company_twitter" target="_blank">'+companyInfo.twitter_username+'</a></p>').appendTo('#info');
					}
					$('<p><strong>Description:</strong> <span id="company_description">'+companyInfo.overview+'</span></p>').appendTo('#info');					
				});
				companies.info(companyName, function(companyInfo) {
					$('#company_value').html(companyInfo.current_value);
				});
			}
		</script>
		<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.8.1/build/reset/reset-min.css">
		<link rel="stylesheet" type="text/css" href="css/common.css">
	</head>
	<body>
		<div id="root">
			<div id="head">
				<div id="logo">Pul&#36;i</div>
			</div>
			<div id="content" class="clearfix">
				<div id="info"></div>	
			</div>
		</div>
	</body>
</html>